<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Bingo Musical</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body {
      background-color: #000; /* fondo negro */
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    h1 { margin-top: 20px; }

    #instructions {
      font-size: 14px;
      margin: 5px auto 20px auto;
      max-width: 500px;
      color: #ccc;
    }

    #board {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      grid-gap: 5px;
      width: 95%;
      max-width: 500px;
      margin: 0 auto 20px auto;
    }

    .cell {
      border: 1px solid #333;
      background-color: #f2f2f2; /* gris claro */
      color: #000;
      text-align: center;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 12px;
      padding: 5px;
      height: 80px;
      border-radius: 10px; /* bordes redondeados */
      overflow: hidden;
      word-wrap: break-word;
      transition: all 0.2s ease-in-out;
    }

    .cell.marked {
      background-color: #ffcc00; /* amarillo neÃ³n */
      color: #000;
      box-shadow: 0 0 5px #ffcc00, 0 0 10px #ffcc00, 0 0 20px #ffcc00;
    }

    .cell.free {
      font-weight: bold;
      background-color: #99ff99; /* verde neÃ³n */
      color: #000;
      box-shadow: 0 0 5px #99ff99, 0 0 10px #99ff99, 0 0 20px #99ff99;
    }

    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      border: none;
      background-color: #222;
      color: #fff;
      transition: all 0.2s;
    }

    button:hover {
      box-shadow: 0 0 5px #ffcc00, 0 0 10px #ffcc00;
    }

    @media (max-width: 400px) {
      .cell { font-size: 10px; height: 70px; }
      button { font-size: 14px; padding: 8px 16px; }
      #instructions { font-size: 12px; }
    }
  </style>
</head>
<body>
  <main>
    <h1>ðŸŽµ Bingo Musical ðŸŽµ</h1>
    <div id="instructions">
      Haz click en las casillas cuando salga la canciÃ³n. Marca lÃ­neas horizontales, verticales, diagonales o las cuatro esquinas para ganar.
    </div>
    <div id="board"></div>
    <div>
      <button id="newCardBtn">Nuevo CartÃ³n</button>
      <button id="bingoBtn">Verificar Bingo</button>
    </div>

    <script>
      const songs = [
        /* Pega aquÃ­ tus 60 canciones exactas de Spotify */
      ];

      function shuffle(array){
        let currentIndex = array.length, randomIndex;
        while(currentIndex !== 0){
          randomIndex = Math.floor(Math.random()*currentIndex);
          currentIndex--;
          [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
      }

      function generateBoard(){
        const board = document.getElementById("board");
        board.innerHTML = "";
        const shuffled = shuffle([...songs]);
        const selected = shuffled.slice(0,24);
        let idx = 0;
        for(let row=0; row<5; row++){
          for(let col=0; col<5; col++){
            const cell = document.createElement("div");
            cell.className = "cell";
            cell.dataset.row = row;
            cell.dataset.col = col;

            if(row===2 && col===2){
              cell.innerText = "FREE SPACE";
              cell.classList.add("free","marked");
            }else{
              cell.innerText = selected[idx]; idx++;
            }

            cell.addEventListener("click",()=>{cell.classList.toggle("marked");});
            board.appendChild(cell);
          }
        }
      }

      function countCompletedLines(){
        const marked = Array.from({length:5},()=>Array(5).fill(false));
        document.querySelectorAll("#board .cell").forEach(cell=>{
          const row = Number(cell.dataset.row);
          const col = Number(cell.dataset.col);
          marked[row][col]=cell.classList.contains("marked");
        });
        let lines=0;
        for(let i=0;i<5;i++){
          if(marked[i].every(Boolean)) lines++;
          if(marked.every(row=>row[i])) lines++;
        }
        if([0,1,2,3,4].every(i=>marked[i][i])) lines++;
        if([0,1,2,3,4].every(i=>marked[i][4-i])) lines++;
        if(marked[0][0] && marked[0][4] && marked[4][0] && marked[4][4]) lines++;
        return lines;
      }

      document.getElementById("bingoBtn").addEventListener("click",()=>{
        const lines = countCompletedLines();
        if(lines>0){
          alert(`ðŸŽ‰ Â¡Bingo! Tienes ${lines} lÃ­nea(s) completa(s).`);
        }else{
          alert("TodavÃ­a no completas una lÃ­nea. Â¡Sigue jugando!");
        }
      });

      document.getElementById("newCardBtn").addEventListener("click", generateBoard);
      generateBoard();
    </script>
  </main>
</body>
</html>
